{% extends 'conductor/layout.html' %}

{% block content %}
{{ super() }}
<div class="container">

  <div id="js-loading-spinner">
  </div>

  <div id="js-table-container-progress" class="row hidden">
    <h3>In progress</h3>

    <table class="display" id="js-table-progress">
      <thead>
        {% include 'conductor/table/header.html' %}
      </thead>
      <tbody>
        {% for contract in in_progress %}
        <tr>
          {% include 'conductor/table/row.html' %}
        </tr>
        {% endfor %}
      </tbody>
    </table><!-- in progress contracts table -->

  <hr>
  </div>

  <div id="js-table-container-upcoming" class="row hidden">
    <h3>Upcoming</h3>

    <table class="display" id="js-table-upcoming">
      <thead>
        {% include 'conductor/table/header.html' %}
      </thead>
      <tbody>
        {% for contract in upcoming %}
        <tr>
          {% include 'conductor/table/row.html' %}
        </tr>
        {% endfor %}
      </tbody>
    </table><!-- upcoming contracts table -->

  <hr>
  </div>

  <div id="js-table-container-all" class="row hidden">
    <h3>All Contracts</h3>

    <table class="display" id="js-table-all">
      <thead>
        {% include 'conductor/table/header.html' %}
      </thead>
      <tbody>
        {% for contract in _all %}
        <tr>
          {% include 'conductor/table/row.html' %}
        </tr>
        {% endfor %}
      </tbody>
    </table><!-- all contracts table -->

  <hr>
  </div>

</div>
{% endblock %}

{% block js %}
{{ super() }}
<script>
$(document).ready(function() {
  $('#js-table-progress').dataTable({
    // order by expiration date -- column 3
    order: [[3, 'asc']]
  });

  $('#js-table-upcoming').dataTable({
    // order by expiration date -- column 3
    order: [[3, 'asc']]
  });

  $('#js-table-all').dataTable({
    // order by expiration date -- column 3
    order: [[3, 'asc']]
  });

  $('#js-loading-spinner').addClass('hidden');
  $('#js-table-container-progress').removeClass('hidden');
  $('#js-table-container-upcoming').removeClass('hidden');
  $('#js-table-container-all').removeClass('hidden');

});
</script>
{% endblock %}
